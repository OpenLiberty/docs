// Copyright (c) 2020 IBM Corporation and others.
// Licensed under Creative Commons Attribution-NoDerivatives
// 4.0 International (CC BY-ND 4.0)
//   https://creativecommons.org/licenses/by-nd/4.0/
//
// Contributors:
//     IBM Corporation
//
:page-layout: general-reference
:page-type: general
:seo-title: SSO configuration with SAML Web Browser SSO and Web inbound propagation - OpenLiberty.io
:seo-description:
= SSO configuration with SAML Web Browser SSO

Security Assertion Markup Language (SAML) Web Browser Single-Sign-On (SSO) enables web applications to delegate user authentication to a centralized location for enterprises to manage and control identities.

SAML is an OASIS open standard that represents and exchanges user identity, authentication, and attribute information between services. Within the SAML Web Browser SSO flow, the identity provider authenticates a user and returns a security token that is called a SAML assertion. A SAML assertion is an XML formatted token that is used to transfer user identity and attribute information from the identity provider of a user to a trusted service provider, such as a website, as part of the completion of an authentication request. The SAML assertion provides a way of transferring information between services. By using SAML, an enterprise service provider can contact a separate enterprise identity provider to authenticate users who are trying to access secure content.

== SAML Web Browser SSO flow

The SAML Web Browser SSO flow includes three components:

* The user
* The identity provider (IdP)
* The service provider (SP)

The identity provider is an entity that issues SAML assertions about an authenticated user. The service provider delegates authentication to an identity provider and relies on information about an authenticated user that exists in a SAML assertion that is issued by an identity provider. Within the SAML Web Browser SSO flow, the user always authenticates to the identity provider, and the service provider relies on the identity provider assertion to identify the user as shown in the following example:

image::/docs/img/saml_actor.gif[Key Concepts in Web Single-Sign-On]

The example illustrates the following process:

1. User requests a service from service provider.
2. Service provider requests a user identity (SAML) from the idenity provider via redirect.
3. Identity provider asks user to login. (There is no sign-in if user has been authenticated).
4. Service provider obtains SAML.
5. Service provider makes an access control decision on the basis of SAML assertion.

The SAML Web Browser SSO flow usually begins with a user's request for a secured web application at the service provider, which is called SP-initiated SSO. It is also possible that SSO starts from the identity provider. In this scenario, the user authenticates to the identity provider, and the identity provider redirects the user to the service provider with a SAML response message, which is called IdP-initiated SSO.

=== SP-initiated solicited Web SSO
The simplest form of cross-domain SSO is the SP-initiated SSO in which the user starts at the service provider. In the following scenario, a user attempts to access a protected resource directly on an service provider website without being logged on. The user does not have an account on the service provider site, but does have a federated account that is managed by a third-party identity provider. The service provider sends an authentication request to the identity provider. Both the request and the returned SAML assertion are sent through the userâ€™s browser where the user request is verified.

image::/docs/img/saml_sp_sso.gif[SP-Initiated solicited Web SSO (End user starting at SP)]

=== IdP-Initiated unsolicited Web SSO
With the IdP-intiated SSO, the user starts at the identity provider. In the following scenario, a user is logged on to the identity provider and attempts to access a resource on a remote service provider server. The SAML assertion is transported to the service provider where it is verified.

image::/docs/img/saml_idp_sso.gif[dP-Initiated unsolicited Web SSO (End user starting at IdP)]

== SAML Single Logout
Single Logout (SLO) is a near-simultaneous logout of a user from a specific authentication session and all active service provider sessions that are associated with the authentication session. Single Logout can be initiated by both the service provider and the identity provider.

=== SP-initiated Single Logout
With the SP-initiated Single Logout, a user clicks a logout link in the service provider to start a global logout. The logout request is fulfilled with the following process:

1. The service provider sends a logout request to the SAML through a web browser.
2. The identity provider requests all active service provider sessions to log out.
3. The identity provider logs out the user and sends the response back to the log out request of the service provider.
4. The service provider ends the user's local security session.

=== IdP-initiated Single Logout
With the IdP-initiated Single Logout, the user clicks a logout link in the identity provider to start a global logout. The logout request is fulfilled with the following process:

1. The identity provider sends a logout request to every service provider that shares a login session through a web browser.
2. The service provider ends the local user login session.
3. The identity provider ends the user's identity provider login session.

== SAML metadata
SAML metadata is configuration data that is required to automatically negotiate agreements between the service provider and the identity provider. The metadata consists of identifiers, binding support and endpoints, certificates, keys, cryptographic capabilities, and security and privacy policies.

=== Open Liberty and SAML
Open Liberty supports the SAML Web browser SSO profile with HTTP post binding, Single Logout, and SAML metadata.
