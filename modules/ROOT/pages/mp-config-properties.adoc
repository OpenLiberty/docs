// Copyright (c) 2022 IBM Corporation and others.
// Licensed under Creative Commons Attribution-NoDerivatives
// 4.0 International (CC BY-ND 4.0)
//   https://creativecommons.org/licenses/by-nd/4.0/
//
// Contributors:
//     IBM Corporation
//
:page-description: MicroProfile Config is an API that externalizes the configuration from microservices, keeping it separate from the source code. MicroProfile Config can be used by applications as a single API that can retrieve configuration information from different sources.
:seo-description: MicroProfile Config is an API that externalizes the configuration from microservices, keeping it separate from the source code. MicroProfile Config can be used by applications as a single API that can retrieve configuration information from different sources.
:page-layout: general-reference
:page-type: general


== MicroProfile Context Propagration

The following MicroProfile Config properties can be specified when MicroProfile Context Propagation is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-context-propagation-1.3-RC1/microprofile-context-propagation-spec-1.3-RC1.html#mpconfig[MicroProfile Context Propagation specification].

.MicroProfile Config properties for MicroProfile Context Propagation
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`mp.context.ManagedExecutor.propagated`
|Specifies the default value for the `propagated` parameter for the `ManagedExecutor` instance
|
|`mp.context.ManagedExecutor.propagated=Security,Application`

|`mp.context.ManagedExecutor.cleared`
|Specifies the default value for the `cleared` parameter for the `ManagedExecutor` instance
|
|`mp.context.ManagedExecutor.cleared=Remaining`

|`mp.context.ManagedExecutor.maxAsync`
|Specifies the default value for the `maxAsync` parameter for the `ManagedExecutor` instance
|
|`mp.context.ManagedExecutor.maxAsync=10`

|`mp.context.ManagedExecutor.maxQueued`
|Specifies the default value for the `maxQueued` parameter for the `ManagedExecutor` instance
|
|`mp.context.ManagedExecutor.maxQueued=1`

|`mp.context.ThreadContext.propagated`
|Specifies the default value for the `propagated` parameter for the `ThreadContext` instance
|
|`mp.context.ThreadContext.propagated=None`

|`mp.context.ThreadContext.cleared`
|Specifies the default value for the `cleared` parameter for the `ThreadContext` instance
|
|`mp.context.ManagedExecutor.cleared=Security,Transaction`

|`mp.context.ThreadContext.unchanged`
|Specifies the default value for the `unchanged` parameter for the `ThreadContext` instance
|
|`mp.context.ManagedExecutor.unchanged=Remaining`

|===

== MicroProfile Fault Tolerance

The following MicroProfile Config properties can be specified when MicroProfile Fault Tolerance is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-fault-tolerance-4.0/microprofile-fault-tolerance-spec-4.0.html#configuration[MicroProfile Fault Tolerance specification].

.MicroProfile Config properties for MicroProfile Fault Tolerance
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`_classname_/_methodname_/_annotationname_/_parametername_=_newvalue_`
|Overrides a value that is set in a fault tolerance annotation at the method level
|
|`com.acme.ClassA/methodB/Retry/maxRetries=5`

|`_classname_/_annotationname_/_parametername_=_newvalue_`
|Overrides a value that is set in a fault tolerance annotation at the annotation level
|
|`com.acme.ClassA/Retry/maxRetries=5`

|`MP_Fault_Tolerance_NonFallback_Enabled`
|Disables or enables all Fault Tolerance annotations except `@Fallback`. The default is `true`
|
|`MP_Fault_Tolerance_NonFallback_Enabled=false`

|`MP_Fault_Tolerance_Metrics_Enabled`
|Disables or enables all metrics that are produced by Fault Tolerance. The default is `true`
|
|`MP_Fault_Tolerance_Metrics_Enabled=false`

|`mp.fault.tolerance.interceptor.priority`
|Configures the Fault Tolerance interceptor base priority
|Application startup
|`mp.fault.tolerance.interceptor.priority=1000`

|===

== MicroProfile GraphQL

The following MicroProfile Config properties can be specified when MicroProfile GraphQL is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-graphql-1.1.0/microprofile-graphql-spec-1.1.0.html[MicroProfile GraphQL specification].

.MicroProfile Config properties for MicroProfile GraphQL
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`mp.graphql.defaultErrorMessage`
|Sets the default error message
|
|`mp.graphql.defaultErrorMessage=Unexpected failure in the system. Jarvis is working to fix it.`

|`mp.graphql.exceptionsWhiteList`
|Specifies a comma-separated list of unchecked exception messages to be included. By default, all unchecked exceptions are on the blocklist.
|
|`mp.graphql.exceptionsWhiteList=org.eclipse.microprofile.graphql.tck.apps.superhero.api.WeaknessNotFoundException`

|`mp.graphql.exceptionsBlackList`
|Hide a message for a checked exception. By default, all checked exceptions are on the allow list.
|
|`mp.graphql.exceptionsBlackList=java.io.IOException,java.util.concurrent.TimeoutException`

|===

== MicroProfile Health

The following MicroProfile Config properties can be specified when MicroProfile Health is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-health-4.0/microprofile-health-spec-4.0.html[MicroProfile Health specification].

.MicroProfile Config properties for MicroProfile Health
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`mp.health.disable-default-procedures`
|When this property is set to `true`, it disables all default vendor procedures so the application processes and displays only the user-defined health check procedures. The default is `false`
|
|`mp.health.disable-default-procedures=true`

|`mp.health.default.readiness.empty.response`
|Set this property to `UP` to change the overall default readiness status to UP while deployed applications are starting up. This property is available in MicroProfile Health 3.1 and later.
|
|`mp.health.default.readiness.empty.response=UP`

|`mp.health.default.startup.empty.response`
|Set this property to UP to change the overall default readiness status to UP while deployed applications are starting up. This property is available in MicroProfile Health 3.1 and later.
|
|`mp.health.default.startup.empty.response=UP`

|===

== MicroProfile JSON Web Token

The following MicroProfile Config properties can be specified when MicroProfile JSON Web Token is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-jwt-auth-2.0/microprofile-jwt-auth-spec-2.0.html[MicroProfile JSON Web Token specification].

.MicroProfile Config properties for MicroProfile JSON Web Token
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`mp.jwt.decrypt.key.location`
|Specifies the location of the Key Management Key, which the private key to decrypt the Content Encryption Key that is then used to decrypt the JWE ciphertext. This private key must correspond to the public key that is used to encrypt the Content Encryption Key.
|
|`mp.jwt.decrypt.key.location=privateKey.pem`

|`mp.jwt.token.cookie`
|Specifies the name of the cookie that is expected to contain a JWT token. The default value is `Bearer`.
|
|`mp.jwt.token.cookie=myToken`

|`mp.jwt.token.header`
| Controls the HTTP request header that is expected to contain a JWT token. You can specify either Authorization, which is the default, or Cookie values.
|
|`mp.jwt.token.header=Cookie`

|`mp.jwt.verify.audiences`
|Specifies a list of allowable `aud` values. At least one of these values must be found in the claim.
|
|`mp.jwt.verify.audiences=conferenceService`

|`mp.jwt.verify.issuer`
|Specifies the expected `iss` claim value to validate against an MicroProfile JWT.
|
|`mp.jwt.verify.issuer=https://example.com/issuer`

|`mp.jwt.verify.publickey`
|Specifies the embedded key material of the public key for the MicroProfile JWT signer, in PKCS8 PEM or JWK(S)
format. If a value is not found, the `mp.jwt.verify.publickey.location`  value is checked.
|
|`mp.jwt.verify.publickey=MIIEvgIBADANBgkqh....``

|`mp.jwt.verify.publickey.algorithm`
|Specifies the public key signature algorithm that is supported by the MicroProfile JWT endpoint. The default value is `RSA256`.
|
|`mp.jwt.verify.publickey.algorithm=ES256`

|`mp.jwt.verify.publickey.location`
|Specifies the relative path or full URL of the public key. All relative paths are resolved within the
archive that uses the `ClassLoader.getResource` method. If the value is a URL, it is resolved by using  a new
`URL(“…”).openStream()` method.
|
|`mp.jwt.verify.publickey.location=publicKey.pem`

|===

== MicroProfile Metrics

The following MicroProfile Config properties can be specified when MicroProfile Metrics is enabled. For more information, see the https://download.eclipse.org/microprofile/microprofile-metrics-4.0/microprofile-metrics-spec-4.0.html[MicroProfile Metrics specification].

.MicroProfile Config properties for MicroProfile Metrics
[cols="2,2,2,2" options="header"]
|===
|Name |Description |When the runtime reads it |Example

|`mp.metrics.tags`
|Specifies tags for a metric. Tag values that are set through this property must escape equal symbols `=` and commas `,` with a backslash `\`
|
|`mp.metrics.tags=app=shop,tier=integration,special=deli\=ver\,y`

|`mp.metrics.appName`
|Passes the value of the  `_app` tag from the application server to the application.
|
|

|===
